@* Pojedynczy wiersz nawyku z tytułem, typem, targetem, statusem check-in i przyciskiem akcji *@

<MudListItem T="string">
    <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center" Class="pa-2">
        <MudStack Spacing="1">
            <MudText Typo="Typo.body1" Style="font-weight: 500">@Item.Title</MudText>
            <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
                <MudChip T="string" Size="Size.Small" Color="Color.Default">
                    @GetTypeLabel()
                </MudChip>
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Cel: @Item.TargetLabel
                </MudText>
            </MudStack>
        </MudStack>

        @if (Item.HasCheckin)
        {
            <MudChip T="string" Color="Color.Success" Icon="@Icons.Material.Filled.CheckCircle">
                Zrobione
            </MudChip>
        }
        else
        {
            <MudButton 
                Variant="Variant.Filled" 
                Color="Color.Primary" 
                OnClick="() => OnCheckin.InvokeAsync(Item)"
                Disabled="Item.IsSubmitting">
                @(Item.IsSubmitting ? "Zapisywanie..." : "Check-in")
            </MudButton>
        }
    </MudStack>
</MudListItem>
<MudDivider />

@code {
    [Parameter, EditorRequired]
    public TodayChecklist.TodayItemVm Item { get; set; } = null!;

    [Parameter, EditorRequired]
    public EventCallback<TodayChecklist.TodayItemVm> OnCheckin { get; set; }

    private string GetTypeLabel()
    {
        // Type: 0 = Binary, 1 = Quantitative (zgodnie z API)
        return Item.Type switch
        {
            0 => "Tak/Nie",
            1 => "Ilościowy",
            _ => "Nieznany"
        };
    }
}
